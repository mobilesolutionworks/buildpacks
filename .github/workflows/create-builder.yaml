name: create-builder

on:
  push:
    branches: [ main, develop ]
    paths-ignore:
      - "containerfiles/**"

jobs:
  create-builder:
    name: create-builder
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Build and Publish
        run: |
          set -ex
          
          mkdir -p bin
          wget https://github.com/buildpacks/pack/releases/download/v0.33.2/pack-v0.33.2-linux.tgz -P bin/
          tar xfz bin/pack-v0.33.2-linux.tgz -C bin
          rm bin/pack-v0.33.2-linux.tgz
          
          export PATH=$PWD/bin:$PATH
          pack config experimental true
          pack builder create yunarta/cnb-mobilesolutionworks-builder:oracle9 --config ./builder.toml